<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>ch.vd.osgi</groupId>
	<artifactId>dsi-osgi-parent</artifactId>
	<version>1.1.17-SNAPSHOT</version>
	<packaging>pom</packaging>

	<name>dsi-osgi-parent</name>
	<description>Pom Parent de projets OSGI pour le DSAS</description>
	<modules>
		<module>1-core-api</module>
		<module>2-dsi-osgi-archetype</module>
	</modules>

	<properties>
		<!-- dependencies version -->
		<version.osgi.core>4.3.1</version.osgi.core>
		<junit.version>4.12</junit.version>
		<cxf.version>3.0.2</cxf.version>
		<jsr339.version>2.4.0</jsr339.version>
		<apache.commons.lang3.version>3.3.2</apache.commons.lang3.version>
		<jackson.jaxrs.version>1.9.5</jackson.jaxrs.version>
		<jackson.jaxrs.json.version>2.5.1</jackson.jaxrs.json.version>
		<openjpa.version>2.3.0</openjpa.version>
		<camel.version>2.14.1</camel.version>
		<apache.poi.version>3.11_1</apache.poi.version>
		<geronimo.jpa.version>1.1</geronimo.jpa.version>
		<commons-beanutils.version>1.8.3_1</commons-beanutils.version>
		<commons-collection.version>3.2.1</commons-collection.version>
		<!-- plugin version -->

	</properties>


	<profiles>
		<profile>
			<id>deploy</id>
			<build>
				<pluginManagement>
					<plugins>
						<plugin>
				        <artifactId>maven-resources-plugin</artifactId>
				        <version>2.4.3</version>
				        <executions>
				          <execution>
				            <id>copy-resources</id>
				            <!-- here the phase you need -->
				            <phase>install</phase>
				            <goals>
				              <goal>copy-resources</goal>
				            </goals>
				            <configuration>
				              <outputDirectory>${user.home}/tools/ch/vd/esb/microbiz/1.0.0/microbiz-1.0.0/deploy/</outputDirectory>
				              <resources>
				                <resource>
				                  <directory>target/</directory>
				                   <includes>
			                            <include>*.jar</include>
			                        </includes>
				                </resource>
				              </resources>
				            </configuration>
				          </execution>
				        </executions>
				      </plugin>
					</plugins>
				</pluginManagement>
			</build>
		</profile>

	</profiles>

	<build>
		<pluginManagement>
			<plugins>
				  <plugin>
		            <groupId>org.apache.maven.plugins</groupId>
		            <artifactId>maven-assembly-plugin</artifactId>
		            <version>2.4.1</version>
			        <executions>
			          <execution>
			            <id>make-assembly</id>
			            <phase>package</phase>
			            <goals>
			              <goal>single</goal>
			            </goals>
			          </execution>
			        </executions>
		        	<configuration>
		        	  <finalName>${project.name}-microbiz-${project.version}</finalName>
			          <descriptors>
			            <descriptor>src/main/assembly/assembly.xml</descriptor>
			          </descriptors>
			        </configuration>
		       </plugin>
				<plugin>
					<groupId>org.apache.felix</groupId>
					<artifactId>maven-bundle-plugin</artifactId>
					<version>2.5.3</version>
					<extensions>true</extensions>
					<configuration>
						<instructions>
							<_include>bnd.bnd</_include>
						</instructions>
					</configuration>
					<executions>
						<execution>
							<id>bundle-manifest</id>
							<phase>process-classes</phase>
							<goals>
								<goal>manifest</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.apache.servicemix.tooling</groupId>
					<artifactId>depends-maven-plugin</artifactId>
					<version>1.2</version>
					<executions>
						<execution>
							<id>generate-depends-file</id>
							<goals>
								<goal>generate-depends-file</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-release-plugin</artifactId>
					<version>2.5.1</version>
					<configuration>
						<developmentVersion>${project.version}</developmentVersion>
					</configuration>
				</plugin>
			</plugins>
		</pluginManagement>
		<plugins>
			<plugin>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.2</version>
				<configuration>
					<source>1.7</source>
					<target>1.7</target>
					<encoding>UTF-8</encoding>
				</configuration>
			</plugin>
			<plugin>
			    <groupId>org.apache.maven.plugins</groupId>
			    <artifactId>maven-checkstyle-plugin</artifactId>
			    <version>2.9.1</version>
			    <executions>
			      <execution>
			        <goals>
			          <goal>check</goal>
			        </goals>
			      </execution>
			    </executions>
			    <configuration>
			  	  <configLocation>sun_checks.xml</configLocation>
			      <failsOnError>true</failsOnError>
			    </configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-archetype-plugin</artifactId>
				<version>2.2</version>
				<configuration>
					<archetypeFilteredExtentions>xml,java,bnd,properties</archetypeFilteredExtentions>
				</configuration>
			</plugin>
		</plugins>
	</build>

	 <dependencyManagement>
	    <dependencies>
		<dependency>
			<groupId>org.osgi</groupId>
			<artifactId>org.osgi.core</artifactId>
			<version>${version.osgi.core}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.commons</groupId>
			<artifactId>commons-lang3</artifactId>
			<version>${apache.commons.lang3.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-blueprint</artifactId>
			<version>${camel.version}</version>
		</dependency>
		<dependency>
		    <groupId>org.apache.camel</groupId>
		    <artifactId>camel-dozer</artifactId>
		    <version>${camel.version}</version>
		</dependency>
		<dependency>
		    <groupId>org.apache.camel</groupId>
		    <artifactId>camel-jackson</artifactId>
		    <version>${camel.version}</version>
		</dependency>
		<dependency>
			<groupId>org.codehaus.jackson</groupId>
			<artifactId>jackson-jaxrs</artifactId>
			<version>${jackson.jaxrs.version}</version>
		</dependency>
	     <dependency>
	        <groupId>org.apache.openjpa</groupId>
	        <artifactId>openjpa</artifactId>
	        <!-- set the version to be the same as the level in your runtime -->
	        <version>${openjpa.version}</version>
	    </dependency>
		<!-- cxf -->
		<dependency>
			<groupId>org.apache.cxf</groupId>
			<artifactId>cxf-rt-rs-client</artifactId>
			<version>${cxf.version}</version>
		</dependency>
		<dependency>
 			<groupId>org.apache.cxf</groupId>
  			<artifactId>cxf-rt-transports-http-hc</artifactId>
			<version>${cxf.version}</version>
		</dependency>
            <dependency>
				<groupId>org.apache.cxf</groupId>
				<artifactId>cxf-rt-transports-http-jetty</artifactId>
				<version>${cxf.version}</version>
			</dependency>
		<dependency>
			<groupId>org.apache.camel</groupId>
			<artifactId>camel-cxf</artifactId>
			<version>${camel.version}</version>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.jaxrs</groupId>
			<artifactId>jackson-jaxrs-json-provider</artifactId>
			<version>${jackson.jaxrs.json.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.specs</groupId>
			<artifactId>org.apache.servicemix.specs.jsr339-api-m10</artifactId>
			<version>${jsr339.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.cxf</groupId>
			<artifactId>cxf-core</artifactId>
			<version>${cxf.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.cxf</groupId>
			<artifactId>cxf-rt-frontend-jaxrs</artifactId>
			<version>${cxf.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.cxf</groupId>
			<artifactId>cxf-rt-rs-security-cors</artifactId>
			<version>${cxf.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.poi</artifactId>
			<version>${apache.poi.version}</version>
		</dependency>

		<dependency>
			<groupId>org.apache.geronimo.specs</groupId>
			<artifactId>geronimo-jpa_2.0_spec</artifactId>
			<version>${geronimo.jpa.version}</version>
		</dependency>

		<dependency>
			<groupId>org.apache.servicemix.bundles</groupId>
			<artifactId>org.apache.servicemix.bundles.commons-beanutils</artifactId>
			<version>${commons-beanutils.version}</version>
		</dependency>
		<dependency>
			<groupId>commons-collections</groupId>
			<artifactId>commons-collections</artifactId>
			<version>${commons-collection.version}</version>
		</dependency>

	</dependencies>
	 </dependencyManagement>
	<dependencies>
		<!-- LOG -->
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<version>1.2.17</version>
			<optional>true</optional>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
			<version>1.7.2</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<version>1.6.6</version>
		</dependency>

		<!-- TEST -->
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>${junit.version}</version>
			<scope>test</scope>
		</dependency>
  </dependencies>


	<scm>
        <connection>scm:git:git@git.etat-de-vaud.ch:shared/dsi-osgi-common</connection>
        <developerConnection>scm:git:git@git.etat-de-vaud.ch:shared/dsi-osgi-common</developerConnection>
        <tag>HEAD</tag>
    </scm>


    <distributionManagement>
        <repository>
          <id>DSAS-repo</id>
          <name>DSAS-repo</name>
          <url>http://nexus.etat-de-vaud.ch/repository/dsas-releases</url>
          <layout>default</layout>
        </repository>
        <snapshotRepository>
          <id>DSAS-snapshots</id>
          <name>DSAS-snapshots</name>
          <url>http://nexus.etat-de-vaud.ch/repository/dsas-snapshots</url>
          <layout>default</layout>
        </snapshotRepository>
	</distributionManagement>

</project>
