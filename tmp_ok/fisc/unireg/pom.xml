<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <!-- POM for Unireg base dir -->

    <modelVersion>4.0.0</modelVersion>

    <groupId>ch.vd.unireg</groupId>
    <artifactId>unireg</artifactId>
    <!-- BEGIN_LVERSION -->
    <version>24R2.C.5-SNAPSHOT</version>
    <!-- END_LVERSION -->
    <packaging>pom</packaging>

    <name>Unireg - Base</name>
    <description>Unireg - Le registre unifie de l'Etat de Vaud</description>

    <modules>
        <module>core</module>
        <module>nexus-data</module>
        <module>business</module>
        <module>avatars</module>
        <module>ubr-data</module>
        <module>nexus</module>
        <module>web</module>
        <module>ws</module>
        <module>jacoco-report</module>
        <module>distribution</module>
    </modules>

    <developers>
    </developers>

    <licenses>
        <license>
            <name/>
            <url/>
        </license>
    </licenses>
    <ciManagement/>
    <scm>
        <url>http://git.etat-de-vaud.ch/?p=fiscalite/unireg.git</url>
        <connection>scm:git:ssh://git.etat-de-vaud.ch:/fiscalite/unireg</connection>
        <developerConnection>scm:git:git@git.etat-de-vaud.ch:/fiscalite/unireg</developerConnection>
    </scm>

    <issueManagement>
        <system>jira</system>
        <url>http://issuetracker.etat-de-vaud.ch/jira/browse/SIFISC</url>
    </issueManagement>

    <build>
        <defaultGoal>install</defaultGoal>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <version>3.0.0-M2</version>
                    <executions>
                        <execution>
                            <id>enforce-maven</id>
                            <goals>
                                <goal>enforce</goal>
                            </goals>
                            <configuration>
                                <rules>
                                    <requireMavenVersion>
                                        <version>3.3</version>
                                    </requireMavenVersion>
                                </rules>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.8.0</version>
                    <configuration>
                        <encoding>UTF-8</encoding>
                        <release>11</release>
                        <showDeprecation>true</showDeprecation>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>3.1.0</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>3.0.0-M1</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>3.0.0-M1</version>
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>3.1.0</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-site-plugin</artifactId>
                    <version>3.7.1</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>3.0.0-M3</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>3.1.1</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>3.1.1</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>3.2.2</version>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <version>1.7.1</version>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <dependencies>
                    <dependency>    <!-- Ajouté le support pour le protocole ssh/scp qui a disparu depuis la v3 de maven -->
                        <groupId>org.apache.maven.wagon</groupId>
                        <artifactId>wagon-ssh</artifactId>
                        <version>3.5.1</version>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>

    <!-- Le 'dependency management' permet de spécifier quelles versions des librairies doivent être utilisées *si* elles apparaissent
         dans les dépendances naturelles des projets. Il ne s'agit donc pas de dépendances globales. -->
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>jakarta.activation</groupId>
                <artifactId>jakarta.activation-api</artifactId>
                <!-- Version 1.x = les namespaces javax.* -->
                <version>1.2.2</version>
            </dependency>
            <dependency>
                <groupId>jakarta.annotation</groupId>
                <artifactId>jakarta.annotation-api</artifactId>
                <!-- Version 1.x = les namespaces javax.* -->
                <version>${jakarta.annotation.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.xml.soap</groupId>
                <artifactId>jakarta.xml.soap-api</artifactId>
                <!-- Version 1.x = les namespaces javax.* -->
                <version>${jakarta.xml.soap.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.activation</groupId>
                <artifactId>jakarta.activation</artifactId>
                <!-- Version 1.x = les namespaces javax.* -->
                <version>${jakarta.activation.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.xml.ws</groupId>
                <artifactId>jakarta.xml.ws-api</artifactId>
                <!-- Version 2.x = les namespaces javax.* -->
                <version>${jakarta.xml.ws.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.jws</groupId>
                <artifactId>jakarta.jws-api</artifactId>
                <!-- Version 2.x = les namespaces javax.* -->
                <version>${jakarta.jws.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.fastinfoset</groupId>
                <artifactId>FastInfoset</artifactId>
                <version>${fastinfoset.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>${hibernate.version}</version>
                <exclusions>
                    <!-- Clash avec jakarta.activation:jakarta.activation-api -->
                    <exclusion>
                        <groupId>javax.activation</groupId>
                        <artifactId>javax.activation-api</artifactId>
                    </exclusion>
                    <!-- Clash sur les classes com.sun.istack.* avec jaxb-core -->
                    <exclusion>
                        <groupId>com.sun.istack</groupId>
                        <artifactId>istack-commons-runtime</artifactId>
                    </exclusion>
                    <!-- Class sur les classes avec com.sun.xml.txw2.* jaxb-core -->
                    <exclusion>
                        <groupId>org.glassfish.jaxb</groupId>
                        <artifactId>txw2</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.jboss.spec.javax.transaction</groupId>
                        <artifactId>jboss-transaction-api_1.2_spec</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>javax.xml.bind</groupId>
                <artifactId>jaxb-api</artifactId>
                <version>${jaxb-api.version}</version>
                <exclusions>
                    <exclusion>
                        <!-- Clash avec jakarta.activation:jakarta.activation-api -->
                        <groupId>javax.activation</groupId>
                        <artifactId>javax.activation-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.bind</groupId>
                <artifactId>jaxb-core</artifactId>
                <version>${jaxb-core.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.bind</groupId>
                <artifactId>jaxb-impl</artifactId>
                <version>${jaxb-impl.version}</version>
            </dependency>
            <dependency>
                <groupId>com.sun.xml.ws</groupId>
                <artifactId>jaxws-ri</artifactId>
                <version>${jaxws-ri.version}</version>
                <type>pom</type>
                <exclusions>
                    <exclusion>
                        <groupId>commonj.sdo</groupId>
                        <artifactId>commonj.sdo</artifactId>
                    </exclusion>
                    <!-- [SIFISC-31788] eclipselink pose des problèmes avec Java 11 -->
                    <exclusion>
                        <groupId>com.sun.xml.ws</groupId>
                        <artifactId>jaxws-eclipselink-plugin</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>com.sun.xml.ws</groupId>
                        <artifactId>sdo-eclipselink-plugin</artifactId>
                    </exclusion>
                    <!-- Vieille API remplacée par org.codehaus.woodstox:stax2-api -->
                    <exclusion>
                        <groupId>org.codehaus.woodstox</groupId>
                        <artifactId>woodstox-core-asl</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.annotation:jakarta.annotation-api -->
                    <exclusion>
                        <groupId>javax.annotation</groupId>
                        <artifactId>javax.annotation-api</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.jws:jakarta.jws-api -->
                    <exclusion>
                        <groupId>javax.jws</groupId>
                        <artifactId>jsr181-api</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.xml.soap:jakarta.xml.soap-api -->
                    <exclusion>
                        <groupId>javax.xml.soap</groupId>
                        <artifactId>javax.xml.soap-api</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.jws:jakarta.xml.ws-api -->
                    <exclusion>
                        <groupId>javax.xml.ws</groupId>
                        <artifactId>jaxws-api</artifactId>
                    </exclusion>
                    <!-- Clash avec javax.mail:mail -->
                    <exclusion>
                        <groupId>com.sun.mail</groupId>
                        <artifactId>jakarta.mail</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <!-- corrige un problème de nommage de la méta-factory SOAP sur Java 11 avec la version 1.4.0 tirée par CXF 3.3.1 (voir https://github.com/javaee/metro-jax-ws/issues/1237) -->
                <groupId>com.sun.xml.messaging.saaj</groupId>
                <artifactId>saaj-impl</artifactId>
                <version>${saaj.version}</version>
            </dependency>
            <dependency>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
                <version>${javamail.version}</version>
                <exclusions>
                    <!-- Clash avec jakarta.activation:jakarta.activation-api -->
                    <exclusion>
                        <groupId>javax.activation</groupId>
                        <artifactId>activation</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-capitastra</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-cyber</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-ech</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-editique</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-events</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-fidor</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-infra</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-party</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-rcpers</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-jaxb2-rcent</artifactId>
                <version>${unireg-jaxb2.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.registre</groupId>
                <artifactId>shared-jmx-common</artifactId>
                <version>${shared-jmx.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.registre</groupId>
                <artifactId>shared-jmx-atomikos</artifactId>
                <version>${shared-jmx.version}</version>
            </dependency>
            <dependency>
                <groupId>com.atomikos</groupId>
                <artifactId>transactions-jdbc</artifactId>
                <version>${atomikos.version}</version>
            </dependency>
            <dependency>
                <groupId>com.atomikos</groupId>
                <artifactId>transactions-jms</artifactId>
                <version>${atomikos.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.shared</groupId>
                <artifactId>shared-service-tracing</artifactId>
                <version>2.2.0</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-bvrplus</artifactId>
                <version>${unireg-bvrplus.version}</version>
                <exclusions>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-jta_1.1_spec</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-jta_1.1_spec</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-xmlbeans</artifactId>
                <version>${unireg-xmlbeans.version}</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>${slf4j.version}</version>
            </dependency>
            <dependency>
                <!-- bridge pour JCL (Spring) sur slf4j -->
                <groupId>org.slf4j</groupId>
                <artifactId>jcl-over-slf4j</artifactId>
                <version>${slf4j.version}</version>
            </dependency>
            <dependency>
                <!-- implémentation log4j2 pour slf4j -->
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-slf4j-impl</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <!-- l'api de log4j2 -->
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-api</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <!-- log4j2 lui-même -->
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-core</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-web</artifactId>
                <version>${log4j.version}</version>
            </dependency>
            <dependency>
                <!-- Pour corriger une NPE lors de l'initialisation dans le FastDateParser sur Java 11 (voir https://issues.apache.org/jira/browse/LANG-1285) -->
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-lang3</artifactId>
                <version>${commons-lang3.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpclient</artifactId>
                <version>4.5.13</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-text</artifactId>
                <version>1.9</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-pool2</artifactId>
                <version>2.11.1</version>
            </dependency>
            <dependency>
                <groupId>commons-beanutils</groupId>
                <artifactId>commons-beanutils</artifactId>
                <version>${beanutils.version}</version>
            </dependency>
            <dependency>
                <groupId>org.glassfish.jaxb</groupId>
                <artifactId>jaxb-runtime</artifactId>
                <version>${glassfish.jaxb.version}</version>
            </dependency>
            <dependency>
                <groupId>io.zipkin.brave</groupId>
                <artifactId>brave-spring-beans</artifactId>
                <version>${brave.version}</version>
            </dependency>
            <dependency>
                <groupId>io.zipkin.brave</groupId>
                <artifactId>brave-context-slf4j</artifactId>
                <version>${brave.version}</version>
            </dependency>
            <dependency>
                <groupId>io.zipkin.brave</groupId>
                <artifactId>brave-instrumentation-servlet</artifactId>
                <version>${brave.version}</version>
            </dependency>
            <dependency>
                <groupId>io.zipkin.brave</groupId>
                <artifactId>brave-instrumentation-jms</artifactId>
                <version>${brave.version}</version>
            </dependency>
            <dependency>
                <groupId>jakarta.jms</groupId>
                <artifactId>jakarta.jms-api</artifactId>
                <version>2.0.3</version>
            </dependency>
            <dependency>
                <groupId>jakarta.transaction</groupId>
                <artifactId>jakarta.transaction-api</artifactId>
                <version>1.3.3</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-integration-tracing-brave</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-core</artifactId>
                <version>${cxf.version}</version>
                <exclusions>
                    <!-- Clash avec l'implémentation com.sun.activation:jakarta.activation -->
                    <exclusion>
                        <groupId>jakarta.activation</groupId>
                        <artifactId>jakarta.activation-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-transports-http</artifactId>
                <version>${cxf.version}</version>
                <exclusions>
                    <exclusion>
                        <groupId>stax</groupId>
                        <artifactId>stax-api</artifactId>
                    </exclusion>
                    <!-- exclusion de geronimo javamail : ce package redéfini les classes javax.mail.* et après l'envoi des emails marche pas bien -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-javamail_1.4_spec</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-activation_1.1_spec</artifactId>
                    </exclusion>
                    <!-- Clash avec l'implémentation com.sun.activation:jakarta.activation -->
                    <exclusion>
                        <groupId>jakarta.activation</groupId>
                        <artifactId>jakarta.activation-api</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-jta_1.1_spec</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-rs-client</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-frontend-jaxws</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-transports-http-jetty</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-bindings-soap</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-frontend-jaxrs</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-rt-rs-service-description</artifactId>
                <version>${cxf.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-databind</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.dataformat</groupId>
                <artifactId>jackson-dataformat-xml</artifactId>
                <version>${jackson.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.jaxrs</groupId>
                <artifactId>jackson-jaxrs-json-provider</artifactId>
                <version>${jackson.version}</version>
                <exclusions>
                    <!-- Clash avec jakarta.activation:jakarta.activation-api -->
                    <exclusion>
                        <groupId>javax.activation</groupId>
                        <artifactId>javax.activation-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-wsclient-common</artifactId>
                <version>${wsclient-common-version}</version>
                <exclusions>
                    <!-- Clash avec org.slf4j:jcl-over-slf4j -->
                    <exclusion>
                        <groupId>commons-logging</groupId>
                        <artifactId>commons-logging</artifactId>
                    </exclusion>
                    <!-- Clash avec l'implémentation com.sun.activation:jakarta.activation -->
                    <exclusion>
                        <groupId>jakarta.activation</groupId>
                        <artifactId>jakarta.activation-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-wsclient-refsec</artifactId>
                <version>${wsclient-refsec-version}</version>
                <exclusions>
                    <!-- Clash avec org.slf4j:jcl-over-slf4j -->
                    <exclusion>
                        <groupId>commons-logging</groupId>
                        <artifactId>commons-logging</artifactId>
                    </exclusion>
                    <!-- Clash avec l'implémentation com.sun.activation:jakarta.activation -->
                    <exclusion>
                        <groupId>jakarta.activation</groupId>
                        <artifactId>jakarta.activation-api</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-wsclient-efacture</artifactId>
                <version>1.12</version>
                <exclusions>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-jta_1.1_spec</artifactId>
                    </exclusion>
                    <!-- Clash avec jakarta.transaction:jakarta.transaction-api -->
                    <exclusion>
                        <groupId>org.apache.geronimo.specs</groupId>
                        <artifactId>geronimo-jta_1.1_spec</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>commons-digester</groupId>
                <artifactId>commons-digester</artifactId>
                <version>2.1</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate.common</groupId>
                <artifactId>hibernate-commons-annotations</artifactId>
                <version>${hibernate.common.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.shared</groupId>
                <artifactId>shared-hibernate</artifactId>
                <version>8.6.0</version>
                <exclusions>
                    <exclusion>
                        <groupId>oracle.jdbc</groupId>
                        <artifactId>ojdbc7</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.woodstox</groupId>
                <artifactId>woodstox-core</artifactId>
                <version>${fasterxml.woodstox.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.unireg</groupId>
                <artifactId>unireg-ubr-data</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>commons-io</groupId>
                <artifactId>commons-io</artifactId>
                <version>${commons-io.version}</version>
            </dependency>
            <dependency>
                <groupId>com.lowagie</groupId>
                <artifactId>itext</artifactId>
                <version>${lowagie.version}</version>
            </dependency>
            <dependency>
                <groupId>org.jetbrains</groupId>
                <artifactId>annotations</artifactId>
                <version>${jetbrain.annotations.version}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml</groupId>
                <artifactId>classmate</artifactId>
                <version>${fasterxml.classmate.version}</version>
            </dependency>
            <dependency>
                <groupId>commons-cli</groupId>
                <artifactId>commons-cli</artifactId>
                <version>${commons-cli.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.shared</groupId>
                <artifactId>shared-iban-validator</artifactId>
                <version>${iban.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <repositories>
        <repository>
            <id>releases</id>
            <name>Releases de l'Etat de Vaud</name>
            <url>${nexus.url.releases}</url>
        </repository>
        <repository>
            <id>snapshots</id>
            <name>Snapshots de l'Etat de Vaud</name>
            <url>${nexus.url.snapshots}</url>
        </repository>
    </repositories>

    <dependencies>
        <!-- nécessaire depuis le JDK 11 (début) -->
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-core</artifactId>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-ri</artifactId>
            <type>pom</type>
        </dependency>
        <!--	Dépendance ajoutée globalement afin de forcer l'ordre de chargement pour être ressemblant à celui de tomcat	-->
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
        </dependency>
        <!-- nécessaire depuis le JDK 11 (fin) -->
        <dependency>
            <groupId>ch.vd.shared</groupId>
            <artifactId>shared-date</artifactId>
            <version>4.6.0</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <!-- Clash avec org.slf4j:jcl-over-slf4j -->
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-jcl</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-acl</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>${commons-io.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>2.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-text</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-collections4</artifactId>
            <version>4.4</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </dependency>
        <dependency>
            <!-- bridge pour JCL (Spring) sur slf4j -->
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
        </dependency>
        <dependency>
            <!-- implémentation log4j2 pour slf4j -->
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-slf4j-impl</artifactId>
        </dependency>
        <dependency>
            <!-- l'api de log4j2 -->
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-api</artifactId>
        </dependency>
        <dependency>
            <!-- log4j2 lui-même -->
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-core</artifactId>
        </dependency>
        <dependency>
            <groupId>com.lowagie</groupId>
            <artifactId>itext</artifactId>
            <version>${lowagie.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>bouncycastle</groupId>
                    <artifactId>bcmail-jdk14</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>bouncycastle</groupId>
                    <artifactId>bcprov-jdk14</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>bouncycastle</groupId>
                    <artifactId>bctsp-jdk14</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>net.sf.ehcache</groupId>
            <artifactId>ehcache</artifactId>
            <version>2.10.9.2</version>
        </dependency>
        <dependency>
            <groupId>org.jetbrains</groupId>
            <artifactId>annotations</artifactId>
            <version>${jetbrain.annotations.version}</version>
        </dependency>
        <!--  Deps de testing -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <version>${mokito.version}</version>
            <scope>test</scope>
            <exclusions>
                <exclusion>
                    <groupId>net.bytebuddy</groupId>
                    <artifactId>byte-buddy</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>net.bytebuddy</groupId>
                    <artifactId>byte-buddy-agent</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>net.bytebuddy</groupId>
            <artifactId>byte-buddy</artifactId>
            <version>1.12.9</version>
        </dependency>
        <dependency>
            <groupId>net.bytebuddy</groupId>
            <artifactId>byte-buddy-agent</artifactId>
            <version>1.12.9</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <distributionManagement>
        <site>
            <id>unireg.website</id>
            <url>scp://sirec@tom.etat-de-vaud.ch/var/www/html/unireg/javadoc-site/unireg-base</url>
        </site>
        <repository>
            <id>nexus.releases</id>
            <name>Nexus releases</name>
            <url>${nexus.url}/app-${application.repository}-stable</url>
        </repository>
        <snapshotRepository>
            <id>nexus.snapshots</id>
            <name>Nexus snaphots</name>
            <url>${nexus.url}/app-${application.repository}-snapshots</url>
            <!-- évite d'ajouter un timestamp à chaque déploiement : nécessaire pour avoir les sources synchrones avec un jar snapshot -->
            <uniqueVersion>false</uniqueVersion>
        </snapshotRepository>
    </distributionManagement>


    <!-- ================= Profils utilisateurs ================= -->
    <profiles>
        <!-- ================= Modules Profiles ================= -->
        <profile>
            <id>ext</id>
            <modules>
                <module>ubr</module>
                <module>batch-rpt</module>
            </modules>
        </profile>
        <profile>
            <id>it</id>
            <modules>
                <!-- web-it a besoin de ubr -->
                <module>ubr</module>
                <module>business-it</module>
                <module>web-it</module>
            </modules>
        </profile>
        <profile>
            <id>all</id>
            <modules>
                <module>ubr</module>
                <module>business-it</module>
                <module>web-it</module>
                <module>tools</module>
                <module>batch-rpt</module>
            </modules>
        </profile>
        <profile>
            <id>rpt</id>
            <modules>
                <module>batch-rpt</module>
            </modules>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-deploy-plugin</artifactId>
                        <configuration>
                            <!-- Ne déploie pas sous nexus les artifacts pour RPT -->
                            <skip>true</skip>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- ================= Profile pour les développeurs pour bypasser la sécurité IAM et RefSec en local ================= -->

        <profile>
            <id>dev</id>
            <properties>
                <iam-security-filters>bypassSecurityFilter,iamAuthFilter</iam-security-filters>
                <securite-service-name>serviceSecurityDebug</securite-service-name>
            </properties>

            <dependencies>

                <!-- Permet d'afficher les requêtes SQL avec les valeurs des paramètres -->
                <dependency>
                    <groupId>p6spy</groupId>
                    <artifactId>p6spy</artifactId>
                    <version>3.8.4</version>
                </dependency>

            </dependencies>
        </profile>

        <!-- ================= Profile pour les développeurs pour skipper les tests  ================= -->

        <profile>
            <id>not</id><!-- NOTests -->
            <properties>
                <skipTests>true</skipTests>
            </properties>
        </profile>

        <!-- ================= Database Profiles ================= -->

        <profile>
            <id>oracle</id>
            <dependencies>
                <dependency>
                    <groupId>com.oracle.database.jdbc</groupId>
                    <artifactId>ojdbc10</artifactId>
                    <version>${oracle.version}</version>
                </dependency>
            </dependencies>
        </profile>
        <profile>
            <id>postgresql</id>
            <dependencies>
                <dependency>
                    <groupId>org.postgresql</groupId>
                    <artifactId>postgresql</artifactId>
                    <version>${postgresql.version}</version>
                    <scope>provided</scope>
                </dependency>
            </dependencies>
        </profile>
        <!--		<profile>-->
        <!--			<id>h2</id>-->
        <!--			<dependencies>-->
        <!--				<dependency>-->
        <!--					<groupId>com.h2database</groupId>-->
        <!--					<artifactId>h2</artifactId>-->
        <!--					<version>${h2.version}</version>-->
        <!--					<scope>provided</scope>-->
        <!--				</dependency>-->
        <!--			</dependencies>-->
        <!--		</profile>-->

        <!-- =================== Environnement profiles -->

        <profile>
            <id>build.source</id>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-source-plugin</artifactId>
                        <version>3.0.1</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>jar</goal>
                                </goals>
                                <phase>package</phase>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- ================= Code coverage (JaCoCo) ================= -->

        <profile>
            <id>coverage</id>
            <properties>
                <!-- JaCoCo & Sonar Properties -->
                <jacoco.version>0.8.8</jacoco.version>
                <sonar.exclusions>web/src/main/webapp/js/original/*</sonar.exclusions>
                <sonar.coverage.jacoco.xmlReportPaths>${project.basedir}/../jacoco-report/target/site/jacoco/jacoco.xml</sonar.coverage.jacoco.xmlReportPaths>
            </properties>
            <build>
                <pluginManagement>
                    <plugins>
                        <plugin>
                            <groupId>org.jacoco</groupId>
                            <artifactId>jacoco-maven-plugin</artifactId>
                            <version>${jacoco.version}</version>
                        </plugin>
                    </plugins>
                </pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <version>${jacoco.version}</version>
                        <configuration>
                            <haltOnFailure>true</haltOnFailure>
                            <append>true</append>
                        </configuration>
                        <executions>
                            <execution>
                                <id>jacoco-initialize</id>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

    <properties>

        <!-- Maven settings -->
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <!--  Deployment settings -->

        <!--suppress UnresolvedMavenProperty -->
        <appDir>${ch.vd.appDir}</appDir>
        <unireg-web.deploy-unit.name>uniregweb</unireg-web.deploy-unit.name>
        <unireg-ws.deploy-unit.name>uniregws</unireg-ws.deploy-unit.name>
        <unireg-nexus.deploy-unit.name>uniregnexus</unireg-nexus.deploy-unit.name>

        <!-- Les fichiers de configuration externes -->
        <unireg-web.properties.path>${appDir}/${unireg-web.deploy-unit.name}/config/environment.properties</unireg-web.properties.path>
        <unireg-web.credentials.path>${appDir}/${unireg-web.deploy-unit.name}/config/credentials.properties</unireg-web.credentials.path>
        <unireg-web.log4j.location>file:${appDir}/${unireg-web.deploy-unit.name}/config/unireg-log4j2.xml</unireg-web.log4j.location>

        <unireg-ws.properties.path>${appDir}/${unireg-ws.deploy-unit.name}/config/environment.properties</unireg-ws.properties.path>
        <unireg-ws.credentials.path>${appDir}/${unireg-ws.deploy-unit.name}/config/credentials.properties</unireg-ws.credentials.path>
        <unireg-ws.log4j.location>file:${appDir}/${unireg-ws.deploy-unit.name}/config/unireg-log4j2.xml</unireg-ws.log4j.location>

        <unireg-nexus.properties.path>${appDir}/${unireg-nexus.deploy-unit.name}/config/environment.properties</unireg-nexus.properties.path>
        <unireg-nexus.credentials.path>${appDir}/${unireg-nexus.deploy-unit.name}/config/credentials.properties</unireg-nexus.credentials.path>
        <unireg-nexus.log4j.location>file:${appDir}/${unireg-nexus.deploy-unit.name}/config/unireg-log4j2.xml</unireg-nexus.log4j.location>

        <!-- Application settings -->
        <copyright.year>2021</copyright.year>
        <dao.framework>hibernate</dao.framework>
        <web.framework>spring</web.framework>
        <amp.genericCore>true</amp.genericCore>
        <amp.fullSource>false</amp.fullSource>

        <!-- Web application versions (voir section "References" de https://tomcat.apache.org/tomcat-8.0-doc/index.html) -->
        <jsp.version>2.2</jsp.version>
        <servlet.version>3.1.0</servlet.version>
        <jstl.version>1.2</jstl.version>
        <taglibs.standard.version>1.1.2</taglibs.standard.version>

        <!-- Framework dependency versions -->
        <tomcat.version>8.5.23</tomcat.version>
        <spring.version>5.3.29</spring.version>
        <spring.security.version>5.7.10</spring.security.version>
        <!-- ATTENTION -->
        <!-- Lors du changement de version de hibernate bien s'assurer que trop de getConnection n'apparaissent pas dans les logs (cf. fichiers srv-access, lignes "JDBC") -->
        <hibernate.version>5.6.15.Final</hibernate.version>
        <cxf.version>3.5.2</cxf.version>
        <brave.version>5.13.9</brave.version>
        <activemq.version>5.17.3</activemq.version>
        <atomikos.version>5.0.108</atomikos.version>
        <jackson.version>2.13.3</jackson.version>
        <ws.v7.version>7.27</ws.v7.version>
        <ws.v8.version>8.12</ws.v8.version>
        <unireg-jaxb2.version>7.23</unireg-jaxb2.version>
        <unireg-common.version>1.0.0</unireg-common.version>
        <unireg-common-monitoring.version>1.0.0</unireg-common-monitoring.version>
        <unireg-bvrplus.version>1.6.0</unireg-bvrplus.version>
        <unireg-xmlbeans.version>1.64</unireg-xmlbeans.version>
        <servlet.common.version>2.3</servlet.common.version>
        <wsclient-common-version>1.5.0</wsclient-common-version>
        <wsclient-refsec-version>1.10.0</wsclient-refsec-version>
        <shared-jmx.version>4.7.0</shared-jmx.version>
        <devex-maven-plugin.version>1.0.19</devex-maven-plugin.version>
        <jakarta.annotation.version>1.3.5</jakarta.annotation.version>
        <jakarta.jws.version>2.1.0</jakarta.jws.version>
        <jakarta.xml.ws.version>2.3.3</jakarta.xml.ws.version>
        <jakarta.xml.soap.version>1.4.2</jakarta.xml.soap.version>
        <fasterxml.woodstox.version>6.2.7</fasterxml.woodstox.version>
        <fastinfoset.version>2.1.0</fastinfoset.version>
        <saaj.version>2.0.1</saaj.version>
        <beanutils.version>1.9.4</beanutils.version>
        <glassfish.jaxb.version>2.3.6</glassfish.jaxb.version>
        <hibernate.common.version>5.1.2.Final</hibernate.common.version>
        <jakarta.activation.version>1.2.2</jakarta.activation.version>
        <jaxb-api.version>2.3.1</jaxb-api.version>
        <jaxb-core.version>3.0.2</jaxb-core.version>
        <jaxb-impl.version>3.0.2</jaxb-impl.version>
        <jaxws-ri.version>3.0.2</jaxws-ri.version>
        <commons-io.version>2.11.0</commons-io.version>
        <commons-lang3.version>3.12.0</commons-lang3.version>
        <commons-cli.version>1.5.0</commons-cli.version>
        <lowagie.version>2.1.7</lowagie.version>
        <jetbrain.annotations.version>23.0.0</jetbrain.annotations.version>
        <fasterxml.classmate.version>1.5.1</fasterxml.classmate.version>
        <iban.version>1.0.0</iban.version>

        <!-- Testing dependency versions -->
        <junit.version>4.13.2</junit.version>
        <!-- la version 1.4 est la seule version compatible avec spring 5.3.20	-->
        <javamail.version>1.4.7</javamail.version>
        <log4j.version>2.17.2</log4j.version>
        <slf4j.version>1.7.36</slf4j.version>
        <mokito.version>4.6.0</mokito.version>

        <!-- Database settings -->
        <oracle.version>19.14.0.0</oracle.version>
        <oracle.hibernate.dialect>ch.vd.shared.hibernate.config.Oracle12cDialectWithNVarChar</oracle.hibernate.dialect>
        <oracle.hibernate.query.substitutions>true 1, false 0</oracle.hibernate.query.substitutions>

        <postgresql.version>42.2.5</postgresql.version>
        <postgresql.hibernate.dialect>ch.vd.unireg.hibernate.PostgreSQL95DialectForUnireg</postgresql.hibernate.dialect>
        <postgresql.hibernate.query.substitutions/>

        <h2.version>1.4.195</h2.version>
        <h2.hibernate.dialect>ch.vd.shared.hibernate.config.Oracle12cDialectWithNVarChar</h2.hibernate.dialect>
        <h2.hibernate.query.substitutions>true 1, false 0</h2.hibernate.query.substitutions>

        <dbunit.version>2.7.3</dbunit.version>
        <dbunit.dataTypeFactoryName>org.dbunit.dataset.datatype.DefaultDataTypeFactory</dbunit.dataTypeFactoryName>
        <dbunit.operation.type>CLEAN_INSERT</dbunit.operation.type>

        <!-- Parametres de Testing -->
        <surefire.useFile>false</surefire.useFile>
        <surefire.argline>-Xms256m -Xmx1024m -DUseSunHttpHandler=true -Dfile.encoding=UTF-8 -Duser.language=en -Duser.country=US -Duser.variant=US</surefire.argline>
        <argLine>--illegal-access=warn ${surefire.argline}</argLine>
        <wit.tomcat.uri>http://localhost:8580/manager/text</wit.tomcat.uri> <!-- ssh unireg_slave2@slv1948v.etat-de-vaud.ch -->

        <!-- Editique -->
        <!-- Temps de timeout lors des impressions locales qui doivent être synchrones -->
        <editique.locale.sync.attente.timeout>120</editique.locale.sync.attente.timeout>
        <!-- Délai d'attente avant qu'une impression locale pas nécessairement synchrone soit re-routée vers l'inbox du demandeur -->
        <editique.locale.async.attente.delai>15</editique.locale.async.attente.delai>

        <!-- Sécurité -->
        <iam-security-filters>iamAuthFilter</iam-security-filters>
        <securite-service-name>serviceSecuriteCache</securite-service-name>

    </properties>

</project>
