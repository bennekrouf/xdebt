<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <artifactId>siel-back</artifactId>

    <name>prj_ev-bleusiel SIEL back</name>
    <description>SIEL backend</description>
    <packaging>pom</packaging>
    <version>9.2.2-SNAPSHOT</version>

    <parent>
        <groupId>ch.vd.institutions.siel</groupId>
        <artifactId>shared-parent</artifactId>
        <version>9.1.0</version>
        <relativePath />
    </parent>

    <modules>
        <module>siel-bootstrap</module>
        <module>siel-web-front</module>
        <module>siel-application</module>
        <module>siel-infrastructure</module>
        <module>siel-domain</module>
        <module>siel-batches</module>
        <module>siel-daily-batches</module>
        <module>siel-selenium</module>
    </modules>

	<properties>
        <maven.deploy.skip>true</maven.deploy.skip>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
		<java.version>1.8</java.version>
		<commons-beanutils.version>1.9.3</commons-beanutils.version>
		<ical4j.version>3.0.5</ical4j.version>

		<!-- For security reasons -->
		<spring-boot.version>1.5.13.RELEASE</spring-boot.version>
        <!-- SONAR -->
        <sonar.language>java</sonar.language>
        <sonar.java.coveragePlugin>jacoco</sonar.java.coveragePlugin>
        <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>

        <sonar.cpd.exclusions>**/mock/**,**/dto/**,**/entity/**,**/mapper/**,**/interfaces/**,**/baselegale/model/Q**,**/baselegale/model/builder/**,**/ContainerSetter.java,**/EntityWalker.java,**/domain/model/*.java,**/siel/siel/migration/model/**</sonar.cpd.exclusions>
        <sonar.coverage.exclusions>**/siel/siel/domain/model/**,**/siel/siel/infrastructure/**,**/siel/siel/migration/**,**/siel/siel/loader/**,**/siel/siel/web/api/**,**/siel/siel/security/**,**/siel/siel/configuration/**,**/application/email/**,**/service/blva/**,**/aspose/dto/**,**/siel/blva/itf/**,**/mdcgen/shared/entity/**,**/siel/siel/domain/**,**/siel/siel/batch/**,**/siel/siel/maintenant/**,**/service/mapper/**,**static/pdfjs/**</sonar.coverage.exclusions>

        <sonar.projectKey>bleusiel:siel-back</sonar.projectKey>
        <sonar.moduleKey>${project.artifactId}</sonar.moduleKey>
		
        <!-- https://community.sonarsource.com/t/aggregated-coverage-for-multi-module-maven-project/17794/2 -->
        <sonar.coverage.jacoco.xmlReportPaths>${project.basedir}/target/site/jacoco/jacoco.xml,${project.basedir}/target/site/jacoco-aggregate/jacoco.xml,${env.WORKSPACE}/jacoco-application-report/jacoco.xml</sonar.coverage.jacoco.xmlReportPaths>

    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <!-- Import dependency management from Spring Boot -->
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>

            <dependency>
                <groupId>com.fasterxml.jackson</groupId>
                <artifactId>jackson-bom</artifactId>
                <version>${jackson.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>

            <!-- siel modules -->
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-domain</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>blvatelier-interface-impl</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-infrastructure</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-application</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-web-front</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-bootstrap</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-batches</artifactId>
                <version>${project.version}</version>
            </dependency>
            <!-- siel-batches -->
            <dependency>
                <groupId>ch.vd.institutions.siel</groupId>
                <artifactId>siel-daily-batches</artifactId>
                <version>${project.version}</version>
            </dependency>

            <!-- Use for PDF generation -->
            <dependency>
                <groupId>commons-beanutils</groupId>
                <artifactId>commons-beanutils</artifactId>
                <version>${commons-beanutils.version}</version>
            </dependency>

            <!--<dependency>
                <groupId>com.hazelcast</groupId>
                <artifactId>hazelcast</artifactId>
                <version>3.10.4</version>
            </dependency>
            <dependency>
                <groupId>com.hazelcast</groupId>
                <artifactId>hazelcast-spring</artifactId>
                <version>3.10.4</version>
            </dependency>-->

            <!-- Library to generate iCanlendar -->
            <dependency>
                <groupId>org.mnode.ical4j</groupId>
                <artifactId>ical4j</artifactId>
                <version>${ical4j.version}</version>
            </dependency>

		</dependencies>
	</dependencyManagement>
    <profiles>
        <profile>
			<id>siel</id>
			<activation>
                <property>
                    <name>!skipSiel</name>
                </property>
			</activation>
			<modules>
				<module>blvatelier-interface-impl</module>
				<module>siel-test-chargement</module>
				<module>siel-migration-chargement</module>
				<module>siel-document-acces</module>
				<module>siel-document-meta</module>
			</modules>
		</profile>
    </profiles>
</project>
